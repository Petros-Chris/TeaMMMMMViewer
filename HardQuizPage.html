<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hard Quiz</title>
    <link rel="stylesheet" href="styling.css">

    <div id="lifeBox">
        <p id="lifeText">Life:
            <img id="lifeImage1" class="lifeImage" src=ALife.png>
        </p>

        <div id="navBox">
            <a href="HomePage.html" class="navLink">Home</a>
            <a href="Catalog.html" class="navLink">Catalog</a>
            <a href="QuizDifficultyPage.html" class="navLink">Quiz</a>
            <a href="yummy.html" class="navLink">Checkout</a>
        </div>
    </div>
</head>

<div id="quizDefBox" class="homePageBoxes">
    <h1 id="teaQuestionNumber"></h1>
    <h1 id="teaQuestion"></h1>

    <button id="answer1" class="answerBtn" onclick="checkAnswer(0)">
        <h2></h2>
    </button>

    <button id="answer2" class="answerBtn" onclick="checkAnswer(1)">
        <h2></h2>
    </button> <br>

    <button id="answer3" class="answerBtn" onclick="checkAnswer(2)">
        <h2></h2>
    </button>

    <button id="answer4" class="answerBtn" onclick="checkAnswer(3)">
        <h2></h2>
    </button> <br>

    <p id="timer">Timer Start!</p>
</div>

<div id="darkModeButton" onclick="toggleDarkMode()">
    <label>Toggle Dark Mode</label>
    <input type="checkbox" id="darkCheckBox">
</div>

<script>
    var duration = 10;
    var timerInterval = setInterval(updateTheTimer, 1000);

    function updateTheTimer() {
        var timer = document.getElementById('timer');

        timer.innerHTML = duration;

        if (duration == 10) {
            timer.style.color = "lightGreen";
        }

        if (duration == 6) {
            timer.style.color = "orange";
        }

        if (duration == 3) {
            timer.style.color = "red";
        }

        if (duration === 0) {
            timer.style.color = "Gray";
            timer.textContent = "Time's up!";
            clearInterval(timerInterval);

            setTimeout(function () {
                window.location.href = "HomePage.html";
            }, 1000);
        } else {
            duration--;
        }
    }
    var teaQuestions = [
        {
            question: "Which rare and expensive tea is harvested exclusively during a certain time of the year in the Darjeeling region?",
            choices: ["Golden Monkey tea", "Silver Needle tea", "Dragon Well tea", "First Flush Darjeeling tea"],
            correctAnswer: 3
        },
        {
            question: "In which country is the Phoenix Dancong oolong tea traditionally produced?",
            choices: ["Japan", "China", "Taiwan", "India"],
            correctAnswer: 1
        },
        {
            question: "What is the primary difference between white tea and green tea in terms of processing?",
            choices: ["Fermentation time", "Harvest season", "Oxidation level", "Tea leaf size"],
            correctAnswer: 2
        },
        {
            question: "Which famous tea-producing region is known for its high-altitude gardens and the production of Himalayan Evergreen tea?",
            choices: ["Nepal", "Kenya", "Vietnam", "Sri Lanka"],
            correctAnswer: 0
        },
        {
            question: "What is the primary flavor note in Tie Guan Yin, a popular Chinese oolong tea?",
            choices: ["Nutty", "Floral", "Smoky", "Fruity"],
            correctAnswer: 1
        },
        {
            question: "Which traditional Chinese tea ceremony is known for its elaborate preparation and use of Yixing clay teapots?",
            choices: ["Gongfu tea ceremony", "Matcha tea ceremony", "Chanoyu", "Sado"],
            correctAnswer: 0
        },
        {
            question: "What is the main characteristic of Lapsang Souchong tea, a Chinese black tea?",
            choices: ["Earthy aroma", "Smoky flavor", "Citrus notes", "Malty sweetness"],
            correctAnswer: 1
        },
        {
            question: "Which type of tea is rolled into small pellets resembling gunpowder and is often used in Moroccan mint tea?",
            choices: ["Jasmine tea", "Gunpowder tea", "Oolong tea", "Pu-erh tea"],
            correctAnswer: 1
        },
        {
            question: "In Japanese tea ceremonies, what is the term for the thin, whisked green tea traditionally served?",
            choices: ["Sencha", "Gyokuro", "Matcha", "Hojicha"],
            correctAnswer: 2
        },
        {
            question: "Which tea is fermented and aged for an extended period, resulting in a dark and earthy flavor?",
            choices: ["Darjeeling tea", "Oolong tea", "Pu-erh tea", "Assam tea"],
            correctAnswer: 2
        },
        {
            question: "What is the primary flavor note in Dong Ding, a famous Taiwanese oolong tea?",
            choices: ["Orchid", "Creamy", "Toasty", "Pineapple"],
            correctAnswer: 2
        },
        {
            question: "Which Japanese green tea is shade-grown before harvest, giving it a vibrant green color and rich umami flavor?",
            choices: ["Sencha", "Genmaicha", "Hojicha", "Gyokuro"],
            correctAnswer: 3
        },
        {
            question: "What is the primary flavor note in Keemun tea, a Chinese black tea?",
            choices: ["Smoky", "Fruity", "Malty", "Floral"],
            correctAnswer: 0
        },
        {
            question: "Which tea is traditionally prepared by steeping large, compressed tea leaves in a Yixing clay teapot?",
            choices: ["Puerh tea", "Darjeeling tea", "Dragon Well tea", "Silver Needle tea"],
            correctAnswer: 0
        },
        {
            question: "In which region of Japan is Uji tea, known for its high-quality matcha, primarily produced?",
            choices: ["Kyoto", "Hokkaido", "Osaka", "Tokyo"],
            correctAnswer: 0
        },
        {
            question: "What is the main characteristic of Yellow Gold tea, a rare and unique Chinese tea?",
            choices: ["Golden color", "Earthy aroma", "Buttery texture", "Champagne-like taste"],
            correctAnswer: 3
        },
        {
            question: "Which tea is traditionally hand-tied into a bulb shape that unfurls during steeping, revealing a flower-like appearance?",
            choices: ["Dragon Pearl Jasmine tea", "Blooming tea", "Ti Kuan Yin tea", "Matcha tea"],
            correctAnswer: 1
        },
        {
            question: "What is the primary flavor note in Korean traditional tea, Daejak Dancha?",
            choices: ["Chestnut", "Seaweed", "Pine", "Ginseng"],
            correctAnswer: 0
        },
        {
            question: "Which Chinese tea is known for its unique processing method involving sun-drying and fermentation?",
            choices: ["Lychee Red tea", "Qi Dan Cong tea", "An Ji Bai Cha", "Yue Guang Bai White tea"],
            correctAnswer: 0
        }
    ];
    var questionsAsked = [""];
    var counter = 0;


    function displayRandomTeaQuestion() {

        for (let i = 0; i < teaQuestions.length; i++) {
            var index = Math.floor(Math.random() * teaQuestions.length);

            if (!questionsAsked.includes(index)) {
                break;
            }
        }
        questionsAsked.push(index);

        if (counter++ == 5) {
            window.location.href = "HomePage.html";
        }

        var currentQuestion = teaQuestions[index]; teaQuestionNumber

        document.getElementById("teaQuestionNumber").innerText = "Question " + counter + ": ";

        document.getElementById("teaQuestion").innerText = currentQuestion.question;

        for (var i = 0; i < currentQuestion.choices.length; i++) {
            document.getElementById("answer" + (i + 1)).innerText = currentQuestion.choices[i];
        }
    }

    function checkAnswer(choiceIndex) {
        var currentQuestion = teaQuestions.find(question => question.question == document.getElementById("teaQuestion").innerText);
        var selectedAnswer = currentQuestion.choices[choiceIndex];

        if (selectedAnswer == currentQuestion.choices[currentQuestion.correctAnswer]) {
            document.getElementById("answer" + (choiceIndex + 1)).style.backgroundColor = "green";
            duration = 10;

            setTimeout(function () {
                displayRandomTeaQuestion();

                for (let i = 1; i <= 4; i++) {
                    document.getElementById("answer" + (i)).style.backgroundColor = "white";
                }
            }, 1000);
        }
        else {
            document.getElementById("answer" + (choiceIndex + 1)).style.backgroundColor = "red";
            deleteImage();
        }
    }
    displayRandomTeaQuestion();

    function deleteImage() {
        var lifeImageClass = document.getElementsByClassName("lifeImage");

        var imageContainer = document.getElementById('lifeText');

        imageContainer.removeChild(lifeImage1);
        checkIfLivesExists();
    }

    function checkIfLivesExists() {
        var lifeImage = document.getElementsByClassName("lifeImage");

        if (lifeImage.length == 0) {
            window.location.href = "HomePage.html";
        }
    }

    function toggleDarkMode() {
        var isDarkMode = document.body.classList.contains('dark-mode');

        //allows the switch
        document.body.classList.toggle('dark-mode', !isDarkMode);

        //This updates the checkbox depeing on if dark mode is on or off
        var checkbox = document.getElementById('darkCheckBox');
        checkbox.checked = !isDarkMode;
        checkbox.disabled = isDarkMode;

        //makes the toggle dark mode box dark
        var darkbutton = document.getElementById("darkModeButton")
        darkbutton.classList.toggle('dark-mode', !isDarkMode);

        //makes the nav dark
        var darknav = document.getElementById("lifeBox");
        darknav.classList.toggle('dark-mode', !isDarkMode);

        var darknav = document.getElementById("navBox");
        darknav.classList.toggle('dark-mode', !isDarkMode);

        // Toggle dark mode class on elements with the homePageBoxes class
        var darkModeElements = document.querySelectorAll('.homePageBoxes');
        darkModeElements.forEach(function (element) {
            element.classList.toggle('dark-mode', !isDarkMode);
        });
        localStorage.setItem('darkMode', !isDarkMode);
    }

    //this makes the page dark if it was set to be dark on another page
    document.addEventListener('DOMContentLoaded', function () {
        var storedDarkMode = localStorage.getItem('darkMode');

        if (storedDarkMode === 'true') {
            toggleDarkMode();
        }
    });
</script>

<body>

</html>